<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <title>JSDoc: Source: routes/topics.js</title>

    <script src="scripts/prettify/prettify.js"> </script>
    <script src="scripts/prettify/lang-css.js"> </script>
    <!--[if lt IE 9]>
      <script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->
    <link type="text/css" rel="stylesheet" href="styles/prettify-tomorrow.css">
    <link type="text/css" rel="stylesheet" href="styles/jsdoc-default.css">
</head>

<body>

<div id="main">

    <h1 class="page-title">Source: routes/topics.js</h1>

    



    
    <section>
        <article>
            <pre class="prettyprint source linenums"><code>/*********************************************************************************************************
 * Inits &amp; Modules
 *********************************************************************************************************/

// Init Firestore/Firebase
const admin = require('firebase-admin');
const db = admin.firestore();

// Init Express
const express = require('express');
const router = express.Router(null);

// Init Routes
const TOPICS = 'topics';

/*********************************************************************************************************
 * REST Methodes
 *********************************************************************************************************/

/*********************************************************************************************************
 * Topics
 *********************************************************************************************************/

/**
 * GET all topics
 */
router.get('/', function (req, res) {
    getCollection(TOPICS).then(result => res.json(result))
});

/*********************************************************************************************************
 * Helper Functions
 * Implemented to avoid redundancy
 * From Firebase 'Cloud Firestore' Documentation https://firebase.google.com/docs/firestore
 *********************************************************************************************************/

/**
 * Returns a Promise that represents a specific collection in a document
 */
getCollection =  function(col) {
    return new Promise(function (resolve) {
        let json = {};

        let collection = db.collection(col);
        collection.get()
            .then(snapshot => {
                snapshot.forEach(doc => {
                    json[doc.id] = doc.data();
                });
            }).then(function () {resolve(json);
        });
    });
};

// export function for server.js
module.exports = router;</code></pre>
        </article>
    </section>




</div>

<nav>
    <h2><a href="index.html">Home</a></h2><h3>Global</h3><ul><li><a href="global.html#getAllLabelsInFB">getAllLabelsInFB</a></li><li><a href="global.html#getCollection">getCollection</a></li><li><a href="global.html#getCollectionId">getCollectionId</a></li><li><a href="global.html#getContactByID">getContactByID</a></li><li><a href="global.html#getContacts">getContacts</a></li><li><a href="global.html#getContactsFromFb">getContactsFromFb</a></li><li><a href="global.html#getDocument">getDocument</a></li><li><a href="global.html#getLabelCount">getLabelCount</a></li><li><a href="global.html#getLabels">getLabels</a></li><li><a href="global.html#getLabelsFromFb">getLabelsFromFb</a></li><li><a href="global.html#getLabelsOfContact">getLabelsOfContact</a></li><li><a href="global.html#getMainTopic">getMainTopic</a></li><li><a href="global.html#getUser">getUser</a></li><li><a href="global.html#getUserByID">getUserByID</a></li><li><a href="global.html#initRoutes">initRoutes</a></li><li><a href="global.html#initServer">initServer</a></li><li><a href="global.html#iterateContacts">iterateContacts</a></li><li><a href="global.html#iterateLabels">iterateLabels</a></li><li><a href="global.html#setMainTopic">setMainTopic</a></li></ul>
</nav>

<br class="clear">

<footer>
    Documentation generated by <a href="https://github.com/jsdoc3/jsdoc">JSDoc 3.5.5</a> on Sun Jan 20 2019 19:12:20 GMT+0100 (Mitteleurop√§ische Zeit)
</footer>

<script> prettyPrint(); </script>
<script src="scripts/linenumber.js"> </script>
</body>
</html>
